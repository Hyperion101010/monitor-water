<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf8" />
        <title>OpenStreetMap Heatmap</title>

        <script src="http://openstreetmap.org/openlayers/OpenLayers.js" type="text/javascript"></script>
        <script src="http://openstreetmap.org/openlayers/OpenStreetMap.js" type="text/javascript"></script>
        <script type="text/javascript" src="heatcanvas.js"></script>
        <script type="text/javascript" src="heatcanvas-openlayers.js"></script>

        <style type="text/css">
            #map{
            }
        </style>

        <script type="text/javascript">
            var map, layer;
            function init(){
                map = new OpenLayers.Map ("map", {
                  controls: [
                      new OpenLayers.Control.Attribution(),
                      new OpenLayers.Control.Navigation()
                  ],
                  maxExtent: new OpenLayers.Bounds(-20037508.34,-20037508.34,
                                                   20037508.34,20037508.34),
                  numZoomLevels: 12,
                  maxResolution: 156543.0339,
                  displayProjection: new OpenLayers.Projection("EPSG:4326"),
                  units: 'm',
                  projection: new OpenLayers.Projection("EPSG:4326")
                });
                
               var mapnik = new OpenLayers.Layer.OSM.Mapnik("Mapnik", {
                   displayOutsideMaxExtent: true,
                   wrapDateLine: true
                });
                map.addLayer(mapnik);
                map.setBaseLayer(mapnik);


                var bounds = OpenLayers.Bounds.fromArray([70.4,15.2,136.2,53.7])
                        .transform(map.displayProjection, map.getProjectionObject());
                map.zoomToExtent(bounds);
                map.setCenter(new OpenLayers.LonLat(77.682856,20.901169).transform(map.displayProjection, map.getProjectionObject()), 2);
                map.zoomTo(4); 

                var size = map.getSize();
                if (size.h > 320) {
                    map.addControl(new OpenLayers.Control.PanZoomBar());
                } else {
                    map.addControl(new OpenLayers.Control.PanZoom());
                }
                
                var heatmap = new OpenLayers.Layer.HeatCanvas("Heat Canvas", map, {},
                        {'step':0.5, 'degree':HeatCanvas.LINEAR, 'opacity':0.3});
                var data = [ [18.71455, 74.007124, 103], [23.416403, 88.109396, 114],[24.846562, 86.165151, 116], [25.846562, 85.165151, 108], [33.415903, 73.945635, 56], [33.415903, 74.945635, 58], [33.415903, 75.945635, 60], [33.415903, 76.945635, 46], [33.415903, 77.945635, 86], [33.415903, 78.945635, 6], [31.602443, 74.643109, 106], [31.602443, 75.643109, 146], [31.602443, 76.643109, 116], [31.602443, 77.643109, 96], [30.120434, 74.194108, 118], [30.120434, 75.194108, 128], [30.120434, 76.194108, 98], [30.120434, 77.194108, 148], [30.120434, 78.194108, 108], [30.120434, 79.194108, 58], [30.120434, 80.194108, 78], [27.876777, 72.276242, 6], [27.876777, 73.276242, 16], [27.876777, 74.276242, 26], [27.876777, 75.276242, 86], [27.876777, 76.276242, 106], [27.876777, 77.276242, 116], [27.876777, 78.276242, 86], [27.876777, 79.276242, 146], [27.876777, 80.276242, 126], [27.876777, 81.276242, 96], [25.937208, 70.821819, 5], [25.937208, 71.821819, 9], [25.937208, 72.821819, 35], [25.937208, 73.821819, 25], [25.937208, 74.821819, 55], [25.937208, 75.821819, 85], [25.937208, 76.821819, 95], [25.937208, 77.821819, 141], [25.937208, 78.821819, 155], [25.937208, 79.821819, 165], [25.937208, 80.821819, 185], [25.937208, 81.821819, 195], [25.937208, 82.821819, 215], [25.937208, 83.821819, 165], [25.937208, 84.821819, 135], [25.937208, 85.821819, 125], [25.937208, 86.821819, 95], [25.937208, 87.821819, 129], [23.926609, 71.123726, 5], [23.926609, 72.123726, 15], [23.926609, 73.123726, 25], [23.926609, 74.123726, 35], [23.926609, 75.123726, 25], [23.926609, 76.123726, 5], [23.926609, 77.123726, 45], [23.926609, 78.123726, 55], [23.926609, 79.123726, 68], [23.926609, 80.123726, 91], [23.926609, 81.123726, 105], [23.926609, 82.123726, 127], [23.926609, 83.123726, 55], [23.926609, 84.123726, 85], [23.926609, 85.123726, 75], [19.164040, 73.287089, 15], [19.164040, 74.287089, 115], [13.164040, 75.287089, 135], [13.164040, 76.287089, 95], [13.164040, 77.287089, 125], [14.164040, 78.287089, 145], [15.164040, 79.287089, 137], [16.164040, 80.287089, 175], [13.164040, 81.287089, 65],[12.164040, 73.287089 ,215],[12.164040, 74.287089 ,265],[12.164040, 75.287089 ,205],[12.164040, 76.287089 ,295],[12.164040, 77.287089 ,305],[12.164040, 78.287089 ,115],[12.164040, 79.287089 ,15],[12.164040, 80.287089 ,245],[12.164040, 81.287089 ,215],[11.164040, 73.287089 ,215],[11.164040, 74.287089 ,115],[11.164040, 76.287089 ,205],[11.164040, 77.287089 ,135],[11.164040, 78.287089 ,145],[10.164040, 76.287089 ,215],[10.164040, 77.287089 ,185],[10.164040, 78.287089 ,145],[10.164040, 79.287089 ,155],[9.164040, 76.287089 ,315],[9.164040, 77.287089 ,245],[9.164040, 78.287089 ,215],[9.164040, 73.287089 ,415]];
                for(var i=0,l=data.length; i<l; i++) {
                    heatmap.pushData(data[i][0], data[i][1], data[i][2]);
                }
                map.addLayer(heatmap);
            }
            window.map = map;
        </script>
    </head>

    <body onload="init();">
        <div id="map" style="width:550px; height:500px;"></div>
    </body>
</html>
