<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf8" />
        <title>OpenStreetMap Heatmap</title>

        <script src="http://openstreetmap.org/openlayers/OpenLayers.js" type="text/javascript"></script>
        <script src="http://openstreetmap.org/openlayers/OpenStreetMap.js" type="text/javascript"></script>
        <script type="text/javascript" src="heatcanvas.js"></script>
        <script type="text/javascript" src="heatcanvas-openlayers.js"></script>

        <style type="text/css">
            #map{
            }
        </style>

        <script type="text/javascript">
            var map, layer;
            function init(){
                map = new OpenLayers.Map ("map", {
                  controls: [
                      new OpenLayers.Control.Attribution(),
                      new OpenLayers.Control.Navigation()
                  ],
                  maxExtent: new OpenLayers.Bounds(-20037508.34,-20037508.34,
                                                   20037508.34,20037508.34),
                  numZoomLevels: 12,
                  maxResolution: 156543.0339,
                  displayProjection: new OpenLayers.Projection("EPSG:4326"),
                  units: 'm',
                  projection: new OpenLayers.Projection("EPSG:4326"),
                  restrictedExtent : [6144368.4360405, 2724576.0254419, 9236093.3556889, 4446549.3984107]
                });
                
               var mapnik = new OpenLayers.Layer.OSM.Mapnik("Mapnik", {
                   displayOutsideMaxExtent: true,
                   wrapDateLine: true
                });
                map.addLayer(mapnik);
                map.setBaseLayer(mapnik);

                var bounds = OpenLayers.Bounds.fromArray([70.4,15.2,136.2,53.7])
                        .transform(map.displayProjection, map.getProjectionObject());
                map.zoomToExtent(bounds);
                map.setCenter(new OpenLayers.LonLat(-20,0).transform(map.displayProjection, map.getProjectionObject()), 2);

                var size = map.getSize();
                if (size.h > 320) {
                    map.addControl(new OpenLayers.Control.PanZoomBar());
                } else {
                    map.addControl(new OpenLayers.Control.PanZoom());
                }
                
                var heatmap = new OpenLayers.Layer.HeatCanvas("Heat Canvas", map, {},
                        {'step':0.5, 'degree':HeatCanvas.LINEAR, 'opacity':0.3});
                var data = [ [18.71455, 74.007124, 103], [18.71455, 74.007124, 103], [18.71455, 74.007124, 103]];
                for(var i=0,l=data.length; i<l; i++) {
                    heatmap.pushData(data[i][0], data[i][1], data[i][2]);
                }
                map.addLayer(heatmap);
            }
            window.map = map;
        </script>
    </head>

    <body onload="init();">
        <div id="map" style="width:850px; height:500px;"></div>
    </body>
</html>
